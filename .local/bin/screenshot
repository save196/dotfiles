#!/bin/bash

mkdir -p "$HOME/Pictures/Screenshots"

IMG_NAME="$HOME/Pictures/Screenshots/$(date +%F_%H%M%S).png"

if [ -z "$1" ]; then
    flameshot screen -p "$IMG_NAME" -n 0
else
    flameshot gui -p "$IMG_NAME"
fi

if [ "$XDG_SESSION_TYPE" = "wayland" ]; then
    wl-copy < "$IMG_NAME"
    wl-copy -p "$IMG_NAME"
else
    xclip -selection clipboard -t image/png < "$IMG_NAME"
    echo -n "$IMG_NAME" | xclip
fi
